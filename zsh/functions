function code {
  cd ~/Code/$1
}

_code() {
  compadd `ls ~/Code`
}

# Completion for code() function
compdef _code code

function g {
  if [[ $# > 0 ]]
  then
    git $@
  else
    git status
  fi
}

# Complete g like git
compdef g=git

function commands {
  history | awk '{a[$2]++}END{for(i in a){print a[i] " " i}}' | sort -rn | head
}

function ta() {
  tmux new-session -c ~/Code/$1 -As $1
}

function gwtc() {
  local branch_name="$1"
  local base_branch="${2:-master}"
  local current_folder=$(basename "$PWD")
  local target_dir="../${current_folder}.${branch_name}"

  if [[ -z "$branch_name" ]]; then
    echo "Usage: gwtc <new-branch-name> [base-branch]"
    return 1
  fi

  # Create worktree: ../current.branch
  git worktree add -b "$branch_name" "$target_dir" "$base_branch" || return 1

  # Navigate and open Claude
  cd "$target_dir" && cc
}
